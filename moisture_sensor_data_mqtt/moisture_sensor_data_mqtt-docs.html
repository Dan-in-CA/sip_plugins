<!DOCTYPE HTML>
<!-- Auto genwerated using markdown2 README.md --extras tables > moisture_sensor_data_mqtt-docs.html -->
<html>
<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html"; charset="utf-8">
  <title>Moisture Sensor Data MQTT Docs</TITLE>
</head>
<body lang="en-us" bgcolor="#ffffff" dir="LTR" style="border: none; padding: 0in">
<h1>Moisture Sensor Data MQTT</h1>

<h2>Introduction</h2>

<p>The Moisture Sensor Data MQTT plugin subscribes to moisture sensor
readings sent to an MQTT topic and makes the readings available to the
Moisture Sensor Control plugin.</p>

<h2>Dependencies</h2>

<p>This plugin requires the MQTT plugin and, optionally the Simple Chart
plugin, to be installed.</p>

<p>This plugin requires the python module jmespath which is not packaged
with SIP. If the module is missing the plugin will try to install the
module, this however requires that pip be installed on the system.</p>

<h2>Configuring</h2>

<table>
<thead>
<tr>
  <th style="text-align:left;">Field</th>
  <th style="text-align:left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td style="text-align:left;">Enable</td>
  <td style="text-align:left;">Enable or disable receiving data for the sensor.</td>
</tr>
<tr>
  <td style="text-align:left;">Sensor (required)</td>
  <td style="text-align:left;">The internal name of the sensor.</td>
</tr>
<tr>
  <td style="text-align:left;">MQTT topic (required)</td>
  <td style="text-align:left;">The MQTT topic that the sensor sends its data to.</td>
</tr>
<tr>
  <td style="text-align:left;">Reading path (optional)</td>
  <td style="text-align:left;">The JSON path of the reading value if required. See below.</td>
</tr>
<tr>
  <td style="text-align:left;">Driest value (required)</td>
  <td style="text-align:left;">The raw driest value the sensor can send.</td>
</tr>
<tr>
  <td style="text-align:left;">Wettest value (required)</td>
  <td style="text-align:left;">The raw wettest vale the sensor can send.</td>
</tr>
<tr>
  <td style="text-align:left;">Current reading (display only)</td>
  <td style="text-align:left;">The last reading from the sensor.</td>
</tr>
<tr>
  <td style="text-align:left;">Reading interval (optional)</td>
  <td style="text-align:left;">Processing one reading after every interval dropping others. Default process all readings.</td>
</tr>
<tr>
  <td style="text-align:left;">Retention period(optional)</td>
  <td style="text-align:left;">The amount of time readings will be collected for the graph plugin. Default suppress collection.</td>
</tr>
</tbody>
</table>

<p>If a required attribute is not set the plugin will quietly skip the sensor.</p>

<h2>Sensor</h2>

<p>Sensor names can be renamed by changing the name of the sensor
field. Sensors can be deleted by blanking out the name in the sensor
field.</p>

<h2>Reading path</h2>

<p>When the sensor reading value is published as a JSON message as opposed to
a simple value specify the JSON path of the reading value using a
<a href="https://jmespath.org/tutorial.html">jmespath expression</a>.</p>

<p>For example if the message is {"reading", "57", "battery": 27}, then
the Reading path would need to be set to "reading" (without the double quotes).</p>

<h2>Driest / wettest value</h2>

<p>The plugin will convert the raw sensor reading values to a percentage
value (0 - 100%) using the configured driest and wettest values.</p>

<h2>Retention period</h2>

<p>If a value is entered the moisture sensor data readings will be made available for
display by the Simple Chart plugin. Old readings are remove once a
week.</p>

<h2>Version information</h2>

<ul>
<li>v0.0.7
<ul>
<li>Plugin will now allow sensors to share a common topic </li>
</ul></li>
<li>v0.0.6
<ul>
<li>Fix issue with deleting sensors with current reading</li>
</ul></li>
<li>v0.0.5
<ul>
<li>Fix issue with processing reading with float timestamp</li>
</ul></li>
<li>v0.0.4
<ul>
<li>Fix datetime serialization issue</li>
</ul></li>
<li>v0.0.3
<ul>
<li>Fixed issue with sensor rename and last_reading</li>
</ul></li>
<li>v0.0.2
<ul>
<li>Fixed check for valid topic before creating MQTT reader</li>
<li>Fixed setting updated check</li>
</ul></li>
<li>v0.0.1
<ul>
<li>initial version</li>
</ul></li>
</ul>
</body>
</html>
